package com.examplefg.malwarechecker.api.firestore;

import com.examplefg.malwarechecker.Model.AppliForFirestore;
import com.google.android.gms.tasks.Task;
import com.google.firebase.firestore.CollectionReference;
import com.google.firebase.firestore.FirebaseFirestore;

//classe qui permet d'effectuer les op√©rations CRUD sur Firestore
public class ApplisHelper {

    private static final String COLLECTION_NAME = "Applis";

    public static CollectionReference getApplisCollection()
    {
        return FirebaseFirestore.getInstance().collection(COLLECTION_NAME);
    }

    // - CREATE
    public static Task<Void> createAppli(String packageName, String label, String signature, boolean isMalware)
    {
        AppliForFirestore appliToCreate = new AppliForFirestore(packageName,label,signature,isMalware);
        return ApplisHelper.getApplisCollection().document(packageName).set(appliToCreate);
    }

    // - UPDATE
    public static Task<Void> updateIsMalware(String packageName, boolean isMalware)
    {
        return ApplisHelper.getApplisCollection().document(packageName).update("isMalware",isMalware);
    }

    public static Task<Void> updateSignature(String packageName, String signature)
    {
        return ApplisHelper.getApplisCollection().document(packageName).update("signature",signature);
    }



}
