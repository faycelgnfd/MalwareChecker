package com.examplefg.malwarechecker.Control.Fragments;


import android.content.SharedPreferences;
import android.os.Bundle;

import androidx.fragment.app.Fragment;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.examplefg.malwarechecker.R;

import butterknife.BindView;
import butterknife.ButterKnife;

import static android.content.Context.MODE_PRIVATE;

/**
 * A simple {@link Fragment} subclass.
 */
public class StatsFragment extends Fragment {

    private final String PREF_FILE_NAME = "StatFile";

    @BindView(R.id.fragments_stats_installedApps) TextView installedAppsText;
    @BindView(R.id.fragments_stats_scannedApps) TextView scannedAppsText;
    @BindView(R.id.fragments_stats_malwareDet) TextView malwareDetText;
    @BindView(R.id.fragments_stats_goodwareDet) TextView goodwareDetText;

    public StatsFragment() {
        // Required empty public constructor
    }

    public static StatsFragment getInstance()
    {
        return new StatsFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View result = inflater.inflate(R.layout.fragment_stats, container, false);
        //relier les vues
        ButterKnife.bind(this,result);
        //afficher les stats
        updateUiWithStats();
        return result;
    }

    private void updateUiWithStats()
    {
        SharedPreferences stats = getActivity().getSharedPreferences(PREF_FILE_NAME,MODE_PRIVATE);
        scannedAppsText.setText("Applications scannées: "+stats.getInt("application_scanned",0));
        goodwareDetText.setText("Goodwares détectés: "+stats.getInt("goodwares",0));
        malwareDetText.setText("Malwares détectés: "+stats.getInt("malwares",0));
        installedAppsText.setText("Application installées: "+stats.getInt("application_installed",0));
    }

}
